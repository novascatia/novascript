<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Key Activity Checker - NovaScript</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Roboto', sans-serif; background-color: #121212; color: #EAEAEA; display: flex; justify-content: center; align-items: center; height: 100vh; margin: 0; text-align: center; }
        .container { width: 90%; max-width: 550px; padding: 40px; background-color: #1E1E1E; border-radius: 15px; box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5); }
        header h1 { font-size: 2.5rem; color: #FFFFFF; margin-bottom: 10px; }
        header p { font-size: 1.1rem; color: #A0A0A0; margin-bottom: 40px; }
        .checker-form { display: flex; flex-direction: column; gap: 20px; margin-bottom: 30px; }
        .form-group input { width: 100%; padding: 15px; background-color: #2a2a2a; border: 2px solid #444; border-radius: 10px; color: #EAEAEA; font-size: 1rem; box-sizing: border-box; transition: border-color 0.3s ease; text-align: center; }
        .form-group input:focus { outline: none; border-color: #2575FC; }
        .btn { display: inline-block; padding: 15px 30px; border: none; border-radius: 50px; text-decoration: none; font-weight: bold; font-size: 1rem; transition: all 0.3s ease; cursor: pointer; background: linear-gradient(90deg, #6A11CB 0%, #2575FC 100%); color: white; box-shadow: 0 4px 15px rgba(65, 132, 244, 0.4); }
        .btn:hover { transform: translateY(-3px); box-shadow: 0 6px 20px rgba(65, 132, 244, 0.6); }
        .btn:disabled { background: #555; cursor: not-allowed; }
        .result-area { margin-top: 30px; padding: 20px; background-color: #2a2a2a; border-radius: 10px; display: none; color: #A0A0A0; border-left: 5px solid #444; }
        .result-area.valid { border-left-color: #4CAF50; }
        .result-area.invalid, .result-area.expired { border-left-color: #F44336; }
        footer { margin-top: 40px; }
        .back-link { color: #777; text-decoration: none; font-size: 0.9rem; transition: color 0.3s ease; }
        .back-link:hover { color: #EAEAEA; }
        .site-footer { position: fixed; bottom: 0; left: 0; width: 100%; background-color: #1E1E1E; color: #777; text-align: center; padding: 15px 0; font-size: 0.9rem; border-top: 1px solid #333; }
        .site-footer a { color: #2575FC; text-decoration: none; font-weight: bold; }
        .site-footer a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Key Activity Checker</h1>
            <p>Enter your key below to check its remaining duration.</p>
        </header>

        <form id="key-checker-form" class="checker-form">
            <div class="form-group">
                <input type="text" id="key-input" placeholder="Paste your key here" required>
            </div>
            <button type="submit" id="check-key-btn" class="btn">Check Now</button>
        </form>

        <div id="result-display" class="result-area"></div>

        <footer>
            <a href="index.html" class="back-link">← Back to Script Library</a>
        </footer>
    </div>

    <footer class="site-footer">
        Made with ❤️ by nov4. &nbsp;|&nbsp;
        <a href="https://discord.gg/mBVJ2mewPp" target="_blank">Join us on Discord</a>
    </footer>

    <script>
        document.getElementById('key-checker-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            const keyInput = document.getElementById('key-input').value;
            const resultDisplay = document.getElementById('result-display');
            const submitButton = document.getElementById('check-key-btn');

            if (!keyInput) {
                resultDisplay.textContent = 'Please enter a key.';
                resultDisplay.className = 'result-area invalid';
                resultDisplay.style.display = 'block';
                return;
            }

            submitButton.disabled = true;
            submitButton.textContent = 'Checking...';
            resultDisplay.style.display = 'none';

            try {
                const response = await fetch('/.netlify/functions/check-key', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({ key: keyInput })
                });
                
                const result = await response.json();
                resultDisplay.className = `result-area ${result.status}`;

                if (result.status === 'valid') {
                    const expiryDate = new Date(result.expires_at).toLocaleString('en-GB');
                    resultDisplay.innerHTML = `<strong>Status:</strong> ACTIVE<br><strong>Expires on:</strong> ${expiryDate}`;
                } else {
                    resultDisplay.innerHTML = `<strong>Status:</strong> ${result.status.toUpperCase()}<br><strong>Message:</strong> ${result.message}`;
                }
                
            } catch (error) {
                resultDisplay.className = 'result-area invalid';
                resultDisplay.innerHTML = '<strong>Error:</strong> Could not connect to the server. Please try again later.';
            } finally {
                resultDisplay.style.display = 'block';
                submitButton.disabled = false;
                submitButton.textContent = 'Check Now';
            }
        });
    </script>
</body>
</html>